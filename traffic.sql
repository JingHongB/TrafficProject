/*
 Navicat Premium Dump SQL

 Source Server         : mysql
 Source Server Type    : MySQL
 Source Server Version : 50729 (5.7.29-log)
 Source Host           : localhost:3306
 Source Schema         : traffic

 Target Server Type    : MySQL
 Target Server Version : 50729 (5.7.29-log)
 File Encoding         : 65001

 Date: 08/01/2025 17:14:20
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for account
-- ----------------------------
DROP TABLE IF EXISTS `account`;
CREATE TABLE `account`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  `password` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  `email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  `role` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  `avatar` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  `register_time` datetime NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `unique_username`(`username`) USING BTREE,
  UNIQUE INDEX `unique_email`(`email`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 2 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of account
-- ----------------------------
INSERT INTO `account` VALUES (1, 'test', '123456', '2313916048@qq.com', 'user', '/avatar/f3fcf959f34449b0a9356e17e8ca2a26', '2024-06-07 19:59:34');

-- ----------------------------
-- Table structure for car
-- ----------------------------
DROP TABLE IF EXISTS `car`;
CREATE TABLE `car`  (
  `id` bigint(20) NOT NULL,
  `type_id` bigint(20) NULL DEFAULT NULL,
  `longitude` double NULL DEFAULT NULL,
  `latitude` double NULL DEFAULT NULL,
  `status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT '空闲',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of car
-- ----------------------------
INSERT INTO `car` VALUES (1876919031672385536, 3, 104.64873, 29.341489, '运货中');
INSERT INTO `car` VALUES (1876919031676579840, 2, 104.543718, 30.714306, '运货中');
INSERT INTO `car` VALUES (1876919031676579841, 3, 104.64873, 29.341489, '运货中');
INSERT INTO `car` VALUES (1876919031676579842, 3, 103.871703, 30.255647, '运货中');
INSERT INTO `car` VALUES (1876919031676579843, 1, 103.516452, 30.006575, '运货中');
INSERT INTO `car` VALUES (1876919031676579844, 1, 104.543718, 30.714306, '运货中');
INSERT INTO `car` VALUES (1876919031676579845, 1, 103.871703, 30.255647, '运货中');
INSERT INTO `car` VALUES (1876919031676579846, 3, 103.516452, 30.006575, '运货中');
INSERT INTO `car` VALUES (1876919031676579847, 2, 104.183439, 31.312783, '运货中');
INSERT INTO `car` VALUES (1876919031676579848, 3, 105.075851, 29.605453, '运货中');

-- ----------------------------
-- Table structure for car_type
-- ----------------------------
DROP TABLE IF EXISTS `car_type`;
CREATE TABLE `car_type`  (
  `id` bigint(20) NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  `load_capacity` double NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of car_type
-- ----------------------------
INSERT INTO `car_type` VALUES (1, '大车型', 25);
INSERT INTO `car_type` VALUES (2, '中车型', 15);
INSERT INTO `car_type` VALUES (3, '小车型', 10);

-- ----------------------------
-- Table structure for goods
-- ----------------------------
DROP TABLE IF EXISTS `goods`;
CREATE TABLE `goods`  (
  `id` bigint(20) NOT NULL,
  `type_id` bigint(20) NULL DEFAULT NULL,
  `owner_id` bigint(20) NULL DEFAULT NULL,
  `weight` double NULL DEFAULT NULL,
  `status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT '待委托',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of goods
-- ----------------------------
INSERT INTO `goods` VALUES (1876919049393319936, 5, 1846877862560997376, 18.8, '已委托');
INSERT INTO `goods` VALUES (1876919070431948800, 1, 1846850191722455040, 10.4, '已委托');
INSERT INTO `goods` VALUES (1876919091344748544, 1, 1846851278084939776, 7.8, '已委托');
INSERT INTO `goods` VALUES (1876919112320462848, 1, 1846851126511181824, 6.4, '已委托');
INSERT INTO `goods` VALUES (1876919133296177152, 5, 1846873672623218688, 17.6, '已委托');
INSERT INTO `goods` VALUES (1876919154313834496, 5, 1846872686940807168, 17.4, '已委托');
INSERT INTO `goods` VALUES (1876919175260188672, 5, 1846872686945001473, 15.4, '已委托');
INSERT INTO `goods` VALUES (1876919196244291584, 5, 1846872686940807169, 18, '已委托');
INSERT INTO `goods` VALUES (1876919217190645760, 1, 1846850284580151296, 11.7, '已委托');
INSERT INTO `goods` VALUES (1876919238157971456, 6, 1846880851099066368, 15.7, '已委托');
INSERT INTO `goods` VALUES (1876919259104325632, 1, 1846850468995309568, 8, '已委托');
INSERT INTO `goods` VALUES (1876919342994599936, 6, 1846880851099066368, 14.7, '已委托');
INSERT INTO `goods` VALUES (1876919363974508544, 2, 1846840017511137280, 4.7, '已委托');
INSERT INTO `goods` VALUES (1876919615628554240, 2, 1846839655156826112, 6.4, '已委托');
INSERT INTO `goods` VALUES (1876919636612657152, 7, 1846885954434572289, 13.6, '已委托');
INSERT INTO `goods` VALUES (1876919657609342976, 2, 1846839655156826112, 9.4, '已委托');
INSERT INTO `goods` VALUES (1876919741491228672, 3, 1846823141682888704, 10.2, '已委托');
INSERT INTO `goods` VALUES (1876919762466942976, 6, 1846880259454738432, 13.7, '已委托');
INSERT INTO `goods` VALUES (1876919783438462976, 6, 1846880851099066368, 16, '已委托');
INSERT INTO `goods` VALUES (1876919804414177280, 2, 1846839655156826112, 9.6, '已委托');
INSERT INTO `goods` VALUES (1876919825389891584, 6, 1846880259454738432, 14, '已委托');
INSERT INTO `goods` VALUES (1876919846327857152, 2, 1846450881562320896, 7.3, '已委托');
INSERT INTO `goods` VALUES (1876919888287674368, 3, 1846823141682888704, 4.1, '已委托');

-- ----------------------------
-- Table structure for goods_type
-- ----------------------------
DROP TABLE IF EXISTS `goods_type`;
CREATE TABLE `goods_type`  (
  `id` bigint(20) NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  `max_weight` double NULL DEFAULT NULL,
  `min_weight` double NULL DEFAULT NULL,
  `father_node` bigint(20) NULL DEFAULT NULL,
  `child_node` bigint(20) NULL DEFAULT NULL,
  `time` bigint(20) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of goods_type
-- ----------------------------
INSERT INTO `goods_type` VALUES (1, '原木', 12.7, 5.6, NULL, 2, 40);
INSERT INTO `goods_type` VALUES (2, '木板', 11.7, 4.6, 1, 3, 40);
INSERT INTO `goods_type` VALUES (3, '家具', 10.7, 3.6, 2, 4, 40);
INSERT INTO `goods_type` VALUES (4, '商品', 10.7, 3.6, 3, NULL, 40);
INSERT INTO `goods_type` VALUES (5, '生铁', 20, 15, NULL, 6, 80);
INSERT INTO `goods_type` VALUES (6, '熟铁', 18, 13, 5, 7, 80);
INSERT INTO `goods_type` VALUES (7, '铁板', 16, 11, 6, 8, 80);
INSERT INTO `goods_type` VALUES (8, '铁制品', 16, 11, 7, NULL, 80);

-- ----------------------------
-- Table structure for poi
-- ----------------------------
DROP TABLE IF EXISTS `poi`;
CREATE TABLE `poi`  (
  `id` bigint(20) NOT NULL,
  `type_id` bigint(20) NULL DEFAULT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  `address` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  `longitude` double NULL DEFAULT NULL,
  `latitude` double NULL DEFAULT NULL,
  `status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT '缺货',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of poi
-- ----------------------------
INSERT INTO `poi` VALUES (1846450881562320896, 2, '白玉县金诺图文广告加工厂', '河东上街213-215号', 105.075851, 29.605453, '缺货');
INSERT INTO `poi` VALUES (1846451223104495616, 3, '御美家衣柜工厂', '高阳街道大石板社区兴回路二段9号', 104.671525, 29.521672, '缺货');
INSERT INTO `poi` VALUES (1846451223117078528, 3, '金鑫匠整装定制工厂', '市城南街道城南社区十二组', 104.638451, 30.146993, '缺货');
INSERT INTO `poi` VALUES (1846819650738475008, 4, '居然之家(昆明路店)', '昆明路世贸城C区', 105.463371, 30.349016, '缺货');
INSERT INTO `poi` VALUES (1846820277996638208, 4, '居然之家国际馆', '巴州区经济开发区西部国际商贸城', 103.756609, 29.486735, '缺货');
INSERT INTO `poi` VALUES (1846820693488586752, 4, '麒麟家具城(曲靖三江大道永安路店)', '三江大道建宁街道办事处旁', 103.87069, 30.069675, '缺货');
INSERT INTO `poi` VALUES (1846820868051324928, 4, '鸿广家具城', '061乡道与060乡道交叉口北240米', 105.095942, 31.089195, '缺货');
INSERT INTO `poi` VALUES (1846821689254109184, 4, '宜家家居(远东·西景花苑店)', '城关镇钟楼滩兴朝美居广场四楼', 106.44367, 30.540193, '缺货');
INSERT INTO `poi` VALUES (1846822472515239936, 3, '福盛木工厂', '德吉路东北侧', 103.816172, 30.688095, '缺货');
INSERT INTO `poi` VALUES (1846823141682888704, 3, '	\r\n阿坝县木材加工厂', '崇拉街与阿曲路交叉口东北140米', 104.543718, 30.714306, '缺货');
INSERT INTO `poi` VALUES (1846823552678543360, 3, '鑫发柏木家具厂', '光良再生资源回收(玉清店)东侧100米', 105.169377, 29.930826, '缺货');
INSERT INTO `poi` VALUES (1846825371291017217, 2, '雄森家具厂', '青龙南路与文华段交叉口西北460米', 103.876305, 30.419245, '缺货');
INSERT INTO `poi` VALUES (1846839035167432704, 2, '森予全屋定制加工厂', '谭家塝路与夷兴大道交叉口西北260米', 105.417802, 30.834586, '缺货');
INSERT INTO `poi` VALUES (1846839655156826112, 2, '博凡尼全屋定制工厂', '职业中等专业学校南侧270米', 103.516452, 30.006575, '缺货');
INSERT INTO `poi` VALUES (1846840017511137280, 2, '文河竹木加工厂', '大福镇民利村8号', 105.112515, 30.198656, '缺货');
INSERT INTO `poi` VALUES (1846850191722455040, 1, '博雅林场', '狮山镇禄金庄村内', 103.623192, 30.266593, '缺货');
INSERT INTO `poi` VALUES (1846850284580151296, 1, '西林县国有王子山林场古障分场', '321省道与357国道交叉口西500米', 104.518535, 30.362189, '缺货');
INSERT INTO `poi` VALUES (1846850468995309568, 1, '谷城县国营跃进林场', '石昝路67号', 104.060784, 29.633847, '缺货');
INSERT INTO `poi` VALUES (1846851126511181824, 1, '昌都林场', '林业加油站西北侧270米', 105.373919, 28.887999, '缺货');
INSERT INTO `poi` VALUES (1846851278084939776, 1, '太安林场', '太安镇马坊村', 105.85321, 30.223825, '缺货');
INSERT INTO `poi` VALUES (1846872686940807168, 5, '平川镇平川铁矿', '[]', 105.007597, 30.290745, '缺货');
INSERT INTO `poi` VALUES (1846872686940807169, 5, '朱兰铁矿分公司', '倮密路与五湖路交叉口南140米', 104.704699, 30.981551, '缺货');
INSERT INTO `poi` VALUES (1846872686945001473, 5, '喜德县明洋铁矿', '[]', 104.095454, 30.673774, '缺货');
INSERT INTO `poi` VALUES (1846873672623218688, 5, '洋县钒钛磁铁矿有限责任公司', '桑溪镇', 105.696895, 30.754145, '缺货');
INSERT INTO `poi` VALUES (1846877862560997376, 5, '贵州众泰工贸有限公司选矿厂', '	\r\n930县道', 103.839649, 29.825362, '缺货');
INSERT INTO `poi` VALUES (1846879871884271616, 6, '都江堰市德胜锻造厂', '蒲阳镇拦厢村6组16号', 103.697563, 31.036616, '缺货');
INSERT INTO `poi` VALUES (1846880259454738432, 6, '自贡市森泰锻造有限公司', '班中路东南侧', 104.64873, 29.341489, '缺货');
INSERT INTO `poi` VALUES (1846880728264679424, 6, '安顺市西秀区七眼桥春喜锻造厂', '安紫高速', 105.888562, 30.9849, '缺货');
INSERT INTO `poi` VALUES (1846880851099066368, 6, '兴盛锻造厂', '103省道西50米', 103.871703, 30.255647, '缺货');
INSERT INTO `poi` VALUES (1846883167348924417, 7, '福森建材批发(美吉特家居建材科技博览城店)', '旭阳镇荣州大道三段美吉特家居建材城刘栋101号', 104.399069, 29.454549, '缺货');
INSERT INTO `poi` VALUES (1846883343241256961, 7, '友盛板材批发部', '247乡道与金象路交叉口东南180米', 105.339185, 29.150487, '缺货');
INSERT INTO `poi` VALUES (1846883529610960896, 7, '智阁板材(奥韵康城店)', '清泉街与怡兴街交叉口西20米', 106.290821, 30.336849, '缺货');
INSERT INTO `poi` VALUES (1846884082059517952, 7, '长华板材', '达外路与三星路交叉口西北120米', 106.959347, 30.861284, '缺货');
INSERT INTO `poi` VALUES (1846884510419591168, 7, '明宇轩门窗加工厂', '顺丰速运(永善店)西南侧240米', 103.090173, 29.640554, '缺货');
INSERT INTO `poi` VALUES (1846885954434572289, 7, '德阳东远建材厂', '四川通力线缆有限公司东北侧190米', 104.183439, 31.312783, '缺货');
INSERT INTO `poi` VALUES (1846886405007679489, 8, '标件五金工具', '普州大道264号2幢2单元504晶盛花园2期', 105.351738, 30.110897, '缺货');
INSERT INTO `poi` VALUES (1846886678627295235, 8, '舒氏商贸五金电器批发', '文林镇英雄广场', 104.148274, 30.013035, '缺货');
INSERT INTO `poi` VALUES (1846887034446880768, 8, '未来万家五金机电(大英店)', '蓬乐街136号', 105.24759, 30.582182, '缺货');
INSERT INTO `poi` VALUES (1846887187614474240, 8, '舒氏商贸五金电器批发', '文林镇英雄广场', 104.148274, 30.013035, '缺货');
INSERT INTO `poi` VALUES (1846887337929940992, 8, '联升五金(杜家坝安置房店)', '昌州街道联升大桥安置房3栋', 105.594798, 29.422951, '缺货');
INSERT INTO `poi` VALUES (1846887487310077952, 8, '园林五金机电(荷塘晓月南区店)', '红河路185-187号', 103.092354, 30.067599, '缺货');
INSERT INTO `poi` VALUES (1846887812075036674, 8, '金牛管金海五金', '希望城7一19门面', 103.681877, 30.614036, '缺货');
INSERT INTO `poi` VALUES (1846887998365048832, 8, '大奔机电五金超市(柏亚·滨江城店)', '柏亚·滨江城2期', 104.277991, 30.879785, '缺货');

-- ----------------------------
-- Table structure for poi_type
-- ----------------------------
DROP TABLE IF EXISTS `poi_type`;
CREATE TABLE `poi_type`  (
  `id` bigint(20) NOT NULL,
  `goods_type_id` bigint(20) NULL DEFAULT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  `father_node` bigint(20) NULL DEFAULT NULL,
  `child_node` bigint(20) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of poi_type
-- ----------------------------
INSERT INTO `poi_type` VALUES (1, 1, '林场', NULL, 2);
INSERT INTO `poi_type` VALUES (2, 2, '加工厂', 1, 3);
INSERT INTO `poi_type` VALUES (3, 3, '制造厂', 2, 4);
INSERT INTO `poi_type` VALUES (4, 4, '家具城', 3, NULL);
INSERT INTO `poi_type` VALUES (5, 5, '铁矿', NULL, 6);
INSERT INTO `poi_type` VALUES (6, 6, '锻造厂', 5, 7);
INSERT INTO `poi_type` VALUES (7, 7, '板材厂', 6, 8);
INSERT INTO `poi_type` VALUES (8, 8, '五金店', 7, NULL);

-- ----------------------------
-- Table structure for task
-- ----------------------------
DROP TABLE IF EXISTS `task`;
CREATE TABLE `task`  (
  `id` bigint(20) NOT NULL,
  `car_id` bigint(20) NULL DEFAULT NULL,
  `goods_id` bigint(20) NULL DEFAULT NULL,
  `start_id` bigint(20) NULL DEFAULT NULL,
  `end_id` bigint(20) NULL DEFAULT NULL,
  `distance` double NULL DEFAULT NULL,
  `status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT '待接取',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of task
-- ----------------------------
INSERT INTO `task` VALUES (1876919049422680064, 1876919031676579847, 1876919049393319936, 1846877862560997376, 1846880851099066368, 47.9, '已完成');
INSERT INTO `task` VALUES (1876919070465503232, 1876919031676579840, 1876919070431948800, 1846850191722455040, 1846840017511137280, 143.3, '已完成');
INSERT INTO `task` VALUES (1876919091382497280, 1876919031676579843, 1876919091344748544, 1846851278084939776, 1846839655156826112, 226.1, '已完成');
INSERT INTO `task` VALUES (1876919112349822976, 1876919031676579846, 1876919112320462848, 1846851126511181824, 1846839655156826112, 218.7, '已完成');
INSERT INTO `task` VALUES (1876919133329731584, 1876919031676579845, 1876919133296177152, 1846873672623218688, 1846880851099066368, 183.4, '已完成');
INSERT INTO `task` VALUES (1876919154339000320, 1876919031676579841, 1876919154313834496, 1846872686940807168, 1846880259454738432, 111.1, '已完成');
INSERT INTO `task` VALUES (1876919175281160192, 1876919031676579842, 1876919175260188672, 1846872686945001473, 1846880851099066368, 51.2, '已完成');
INSERT INTO `task` VALUES (1876919196265263104, 1876919031672385536, 1876919196244291584, 1846872686940807169, 1846880259454738432, 182.4, '已完成');
INSERT INTO `task` VALUES (1876919217215811584, 1876919031676579844, 1876919217190645760, 1846850284580151296, 1846839655156826112, 104.1, '已完成');
INSERT INTO `task` VALUES (1876919238183137280, 1876919031676579847, 1876919238157971456, 1846880851099066368, 1846885954434572289, 121.3, '已完成');
INSERT INTO `task` VALUES (1876919259125297152, 1876919031676579848, 1876919259104325632, 1846850468995309568, 1846450881562320896, 98.2, '已完成');
INSERT INTO `task` VALUES (1876919343011377152, 1876919031676579842, 1876919342994599936, 1846880851099066368, 1846883529610960896, 232.4, '运货中');
INSERT INTO `task` VALUES (1876919363987091456, 1876919031676579840, 1876919363974508544, 1846840017511137280, 1846823141682888704, 79.1, '已完成');
INSERT INTO `task` VALUES (1876919615649525760, 1876919031676579844, 1876919615628554240, 1846839655156826112, 1846823141682888704, 126.1, '已完成');
INSERT INTO `task` VALUES (1876919636637822976, 1876919031676579847, 1876919636612657152, 1846885954434572289, 1846886405007679489, 174.2, '运货中');
INSERT INTO `task` VALUES (1876919657630314496, 1876919031676579843, 1876919657609342976, 1846839655156826112, 1846823552678543360, 159.4, '运货中');
INSERT INTO `task` VALUES (1876919741512200192, 1876919031676579840, 1876919741491228672, 1846823141682888704, 1846820693488586752, 96.5, '运货中');
INSERT INTO `task` VALUES (1876919762487914496, 1876919031676579841, 1876919762466942976, 1846880259454738432, 1846884510419591168, 154.5, '运货中');
INSERT INTO `task` VALUES (1876919783451045888, 1876919031676579845, 1876919783438462976, 1846880851099066368, 1846883343241256961, 187.6, '运货中');
INSERT INTO `task` VALUES (1876919804430954496, 1876919031676579846, 1876919804414177280, 1846839655156826112, 1846823141682888704, 126.1, '运货中');
INSERT INTO `task` VALUES (1876919825410863104, 1876919031672385536, 1876919825389891584, 1846880259454738432, 1846885954434572289, 223.7, '运货中');
INSERT INTO `task` VALUES (1876919846348828672, 1876919031676579848, 1876919846327857152, 1846450881562320896, 1846451223104495616, 40.2, '运货中');
INSERT INTO `task` VALUES (1876919888300257280, 1876919031676579844, 1876919888287674368, 1846823141682888704, 1846819650738475008, 97, '运货中');

-- ----------------------------
-- Triggers structure for table task
-- ----------------------------
DROP TRIGGER IF EXISTS `task_status`;
delimiter ;;
CREATE TRIGGER `task_status` AFTER UPDATE ON `task` FOR EACH ROW BEGIN
	IF NEW.status = '完成' THEN
		UPDATE car SET status = '空闲'
		WHERE id = NEW.car_id;

	  UPDATE goods SET status = '已到达'
    WHERE id = NEW.goods_id;

	  UPDATE poi SET status = '有货'
    WHERE id = NEW.end_id;
	END IF;

	IF NEW.status = '任务中' THEN
		UPDATE car SET status = '运输'
		WHERE id = NEW.car_id;

	  UPDATE goods SET status = '运输中'
    WHERE id = NEW.goods_id;

	  UPDATE poi SET status = '缺货'
    WHERE id = NEW.start_id;
	END IF;
END
;;
delimiter ;

SET FOREIGN_KEY_CHECKS = 1;
